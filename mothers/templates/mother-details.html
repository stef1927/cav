{% extends "base.html" %}

{% block ng_controller %}MotherDetailsCtrl{% endblock %}

{% block content %}

{% if object.id %}
<h1>{{object.name}} {{object.surname}}</h1>
{% else %}
<h1>Nuova madre</h1>
{% endif %}


{% load mothers_filters %}

<h2>Dettagli</h2>
<div class="container-fluid">
    <form class="form-inline" ng-controller="MotherCtrl" role="form">
    {% csrf_token %}

        <div class="col-sm-8 col-md-8">
            <table id="rows-table" class="table table-no-border">
                <tbody>
                    {% for row in form.rows %}
                        <tr>
                            {% for field in row %}
                            <td>
                                {{ field.label_tag }}
                            </td>
                            {% if field in form.large_fields %}<td colspan="3">{% else %}<td>{% endif %}
                                <div class="input-group" style="width:100%;">
                                    {% if field in form.date_fields %}
                                        {{ field|addclass:'form-control date-picker' }}
                                        <label for="{{ field.id_for_label }}" class="input-group-addon btn">
                                            <span class="glyphicon glyphicon-calendar"></span></label>
                                    {% else %}
                                        {{ field|addclass:'form-control' }}
                                    {% endif %}
                                </div>
                            </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="col-sm-2 col-md-2">
            <input id="save-mother-btn" class="btn btn-primary btn-lg btn-block" ng-click="modify_mother()" value="Salva" />
            <input id="cancel-mother-detail-btn" class="btn btn-primary btn-lg btn-block" ng-click="reset_mother()" value="Annulla" />
            <input id="print-mother-btn" class="btn btn-primary btn-lg btn-block" ng-click="print_mother()" value="Stampa" />
        </div>
    </form>
</div>

<h2>
    Bambini
    <button id="add-child-btn" type="button" class="btn btn-default"
            data-toggle="modal" data-target="#add-child-popup" data-backdrop="static">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
    </button>
</h2>
<div class="container-fluid">
    <div class="col-sm-8 col-md-8">
        <table id="mother-detail-donations" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th>Nome</th>
                <th>Data nascita</th>
                <th>Sesso</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {% for child in object.get_children %}
            <tr>
                <td>{{ child.get_name }}</td>
                <td>{{ child.get_date_of_birth }}</td>
                <td>{{ child.get_sex }}</td>
                <td>
                    <button id="edit-child-btn" type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                    </button>

                    <button id="delete-child-btn" type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="add-child-popup" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modal Header</h4>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">

                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<h2>
    Donazioni
    <button id="add-donation-btn" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
    </button>
</h2>
<div class="container-fluid">
    <div class="col-sm-10 col-md-10">
        <table id="mother-details-donations" class="table table-striped table-bordered display" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th>Data</th>
            <th>Richiesto</th>
            <th>Offerto</th>
            <th>Importo</th>
            <th>Operatore</th>
            <th></th>
        </tr>
        </thead>

        <tbody>
        {% for donation in object.get_donations %}
        <tr>
            <td>{{ donation.get_date_of_donation }}</td>
            <td>{{ donation.get_requested }}</td>
            <td>{{ donation.get_given }}</td>
            <td>{{ donation.get_amount }}</td>
            <td>{{ donation.get_operator }}</td>
            <td>
                <button id="edit-donation-btn" type="button" class="btn btn-default">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                </button>

                <button id="delete-donation-btn" type="button" class="btn btn-default">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </button>
            </td>
        </tr>
        {% endfor %}
        </tbody>
        </table>
    </div>
</div>

{% endblock %}