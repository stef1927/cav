{% extends "base.html" %}

{% block content %}

{% if object.id %}
<h1>{{object.name}} {{object.surname}}</h1>
{% else %}
<h1>Nuova madre</h1>
{% endif %}


{% load mothers_filters %}

<h2>Dettagli</h2>
<div class="container-fluid">
    <form class="form-inline" role="form" action="{{ action }}" method="POST">
    {% csrf_token %}

        {% if form.non_field_errors %}
        <div class="alert alert-danger col-sm-8 col-md-8" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            {{ form.non_field_errors }}
        </div>
        {%endif %}

        <div class="col-sm-8 col-md-8">
            {% if form.disabled %}<fieldset disabled>{%endif %}
            <table id="rows-table" class="table table-no-border">
                <tbody>
                    {% for row in form.rows %}
                        <tr>
                            {% for field in row %}
                            <td>
                                {{ field.label_tag }}
                            </td>
                            {% if field in form.large_fields %}<td colspan="3">{% else %}<td>{% endif %}
                                <div class="input-group" style="width:100%;">
                                    {{ field.errors }}
                                    {% if field in form.date_fields %}
                                        {{ field|addclass:'form-control date-picker' }}
                                        <label for="{{ field.id_for_label }}" class="input-group-addon btn">
                                            <span class="glyphicon glyphicon-calendar"></span></label>
                                    {% else %}
                                        {{ field|addclass:'form-control' }}
                                    {% endif %}


                                    {% if field.help_text %}
                                        <p class="help">{{ field.help_text|safe }}</p>
                                    {% endif %}
                                </div>
                            </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% if form.disabled %}</fieldset>{%endif %}
        </div>

        <div class="col-sm-2 col-md-2">
            {% if form.disabled %}
            <input id="modify-mother-btn" type="submit" class="btn btn-primary btn-lg btn-block" value="Modifica" />
            {% else %}
            <input id="save-mother-btn" type="submit" class="btn btn-primary btn-lg btn-block" value="Salva" />
            <input id="cancel-mother-detail-btn" type="submit" class="btn btn-primary btn-lg btn-block" value="Annulla" />
            {% endif %}
            <input id="print-mother-btn" type="submit" class="btn btn-primary btn-lg btn-block" value="Stampa" />
        </div>
    </form>
</div>

<h2>
    Bambini
    <button id="add-child-btn" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
    </button>
</h2>
<div class="container-fluid">
    <div class="col-sm-8 col-md-8">
        <table id="mother-detail-donations" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th>Nome</th>
                <th>Data nascita</th>
                <th>Sesso</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {% for child in object.get_children %}
            <tr>
                <td>{{ child.get_name }}</td>
                <td>{{ child.get_date_of_birth }}</td>
                <td>{{ child.get_sex }}</td>
                <td>
                    <button id="edit-child-btn" type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                    </button>

                    <button id="delete-child-btn" type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<h2>
    Donazioni
    <button id="add-donation-btn" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
    </button>
</h2>
<div class="container-fluid">
    <div class="col-sm-10 col-md-10">
        <table id="mother-details-donations" class="table table-striped table-bordered display" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th>Data</th>
            <th>Richiesto</th>
            <th>Offerto</th>
            <th>Importo</th>
            <th>Operatore</th>
            <th></th>
        </tr>
        </thead>

        <tbody>
        {% for donation in object.get_donations %}
        <tr>
            <td>{{ donation.get_date_of_donation }}</td>
            <td>{{ donation.get_requested }}</td>
            <td>{{ donation.get_given }}</td>
            <td>{{ donation.get_amount }}</td>
            <td>{{ donation.get_operator }}</td>
            <td>
                <button id="edit-donation-btn" type="button" class="btn btn-default">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                </button>

                <button id="delete-donation-btn" type="button" class="btn btn-default">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </button>
            </td>
        </tr>
        {% endfor %}
        </tbody>
        </table>
    </div>
</div>

{% endblock %}